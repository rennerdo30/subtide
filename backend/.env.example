# Video Translate Backend - Environment Configuration
# Copy this file to .env and configure as needed

# =============================================================================
# Server Configuration
# =============================================================================
HOST=0.0.0.0
PORT=5001

# =============================================================================
# Whisper Configuration (for Tier 2 and Tier 3)
# =============================================================================
# Enable Whisper transcription for videos without subtitles
ENABLE_WHISPER=true

# Whisper model size: tiny, base, small, medium, large
# Larger models are more accurate but require more memory and time
WHISPER_MODEL=base

# Beam size for Whisper decoding (higher = more accurate but slower)
# Recommended: 5 for accuracy, 1 for speed
WHISPER_BEAM_SIZE=5

# Audio normalization (boosts quiet voices for better transcription)
ENABLE_AUDIO_NORMALIZATION=true

# Speaker Diarization (Requires HF_TOKEN)
ENABLE_DIARIZATION=true
HF_TOKEN=your_huggingface_token_here

# =============================================================================
# Tier 3 - Managed Translation (Optional)
# =============================================================================
# If you want the server to handle LLM API calls (Tier 3 mode),
# configure these settings. Leave empty for Tier 1/2 (user provides API key).

# Your LLM API key (OpenAI, OpenRouter, etc.)
# SERVER_API_KEY=sk-your-api-key-here

# API endpoint (defaults to OpenAI)
# For OpenRouter free models, use: https://openrouter.ai/api/v1
# SERVER_API_URL=https://api.openai.com/v1

# Model to use for translation
# Recommended FREE models (via OpenRouter):
#   google/gemini-2.0-flash-exp:free     - Best for non-English translation
#   meta-llama/llama-4-maverick:free     - 12 languages, very capable
#   meta-llama/llama-3.3-70b-instruct:free - EN/DE/FR/IT/PT/HI/ES/TH
#   xiaomi/mimo-v2-flash:free            - Good general purpose
# SERVER_MODEL=google/gemini-2.0-flash-exp:free

# Language-specific model selection (JSON format)
# Use different models for different target languages
# Example: {"ja":"claude-3-haiku","ko":"claude-3-haiku","zh":"gemini-2.0-flash","default":"gpt-4o-mini"}
# MODEL_LANG_MAP={}


# =============================================================================
# Whisper Accuracy Tuning
# =============================================================================
# Lower no_speech_threshold = captures more speech (but may include noise)
# Higher = stricter filtering (may miss quiet speech)
WHISPER_NO_SPEECH_THRESHOLD=0.4
WHISPER_COMPRESSION_RATIO_THRESHOLD=2.4
WHISPER_LOGPROB_THRESHOLD=-1.0

# =============================================================================
# Platform Specific Overrides
# =============================================================================
# Explicitly set the platform (runpod, macos, linux-cuda, linux-cpu, windows)
# PLATFORM=runpod

# Override backends (useful for custom setups)
# WHISPER_BACKEND=faster-whisper
# DIARIZATION_BACKEND=nemo
